function infoBox(a,o,n){infowindow["info"+i]=new google.maps.InfoWindow,google.maps.event.addListener(o,"click",function(t){infowindow["info"+i].setContent(n),infowindow["info"+i].open(a,o)}),function(o,n){google.maps.event.addListener(o,"click",function(t){infowindow["info"+i].setContent(n),infowindow["info"+i].open(a,o)})}(o,n)}function validar(){var a;$.getJSON("general.json").done(function(i,o,n){dataJSON=i.mapa.items,a=i.mapa.contador+1,eventsholded={id:a,position:{lat:$("#latitud").val(),lng:$("#longitud").val()},nombre:$("#nombre").val(),direccion:$("#direccion").val(),descripcion:$("#descripcion").val(),valorPlatoMax:$("#valor").val(),reputacion:$("#reputacion").val(),link:$("#link").val(),imagen:$("#foto").val().split("\\").pop()},$.ajax({type:"POST",dataType:"json",async:!1,url:"http://localhost/json.php",data:eventsholded,success:function(){alert("Thanks!")},failure:function(){alert("Error!")}}),location.reload()})}function editardata(){eventsholded={id:$("#idpizza").val(),position:{lat:$("#latitud").val(),lng:$("#longitud").val()},nombre:$("#nombre").val(),direccion:$("#direccion").val(),descripcion:$("#descripcion").val(),valorPlatoMax:$("#valor").val(),reputacion:$("#reputacion").val(),link:$("#link").val(),imagen:$("#foto").val().split("\\").pop()},console.log(eventsholded),$.ajax({type:"POST",dataType:"json",async:!1,url:"http://localhost/jsonupdate.php",data:eventsholded,success:function(){alert("Thanks!")},failure:function(){alert("Error!")}}),location.reload()}var dataJSON={},restaurantes=[];$.getJSON("general.json").done(function(a,o,n){dataJSON=a.mapa.items,google.maps.event.addDomListener(window,"load",function(){var a={zoom:13,center:new google.maps.LatLng(-34.609476,-58.425979),styles:[{featureType:"all",stylers:[{saturation:-80}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{hue:"#00ffee"},{saturation:50}]},{featureType:"poi.business",elementType:"labels",stylers:[{visibility:"off"}]}]},a=new google.maps.Map(document.getElementById("map"),a),o={},n={};for(i in dataJSON){console.log(dataJSON[i].descripcion);var t="";if(dataJSON[i].valorPlatoMax){var e=parseInt(dataJSON[i].valorPlatoMax.match(/\d+/));if(200>=e)var l='<span class="ion-social-usd"></span> <b> (menor a $200)</b>';200<e&&600>e&&(l='<span class="ion-social-usd"></span><span class="ion-social-usd"></span> <b> (entre $200 y $600)</b>'),600<=e&&(l='<span class="ion-social-usd"></span><span class="ion-social-usd"></span><span class="ion-social-usd"></span> <b> (mayor a $600)</b>')}if(dataJSON[i].reputacion)for(e=parseInt(dataJSON[i].reputacion.match(/\d+/)),j=1;j<=e;j++)t+='<span class="ion-ios-star"></span>';n["content"+i]='<div id="content"><a id="editar" href="#">Editar</a><div id="siteNotice"></div><h1 id="firstHeading" class="firstHeading">Pizzería '+dataJSON[i].nombre+'</h1><div id="bodyContent"><p>Dirección: '+dataJSON[i].direccion+"</p><p>Descripción: "+dataJSON[i].descripcion+"</p><p>Valor promedio: "+l+"</p><p>Reputación: "+t+'</p><p>Web: <a href="http://'+dataJSON[i].link+'" target="_blank">'+dataJSON[i].link+'</a></p><img class="imagen" src="assets/pizza.gif" ><img class="imagen" style="border:5px solid black;" src="assets/'+dataJSON[i].imagen+'" ><input type="hidden" id="idpizza" value="'+dataJSON[i].id+'"></div></div>',o["marcador"+i]=new google.maps.Marker({position:{lat:parseFloat(dataJSON[i].position.lat),lng:parseFloat(dataJSON[i].position.lng)},title:dataJSON[i].nombre}),o["marcador"+i].setMap(a),infoBox(a,o["marcador"+i],n["content"+i])}})}).fail(function(a,i,o){console.log("Algo ha fallado: "+i)});var infowindow={};$(document).on("click","#editar",function(){$("#editardata").show(),$("#enviardata").hide(),$.getJSON("general.json").done(function(a,o,n){dataJSON=a.mapa.items;for(i in dataJSON)dataJSON[i].id==$("#idpizza").val()&&($("#nombre").val(dataJSON[i].nombre),$("#direccion").val(dataJSON[i].direccion),$("#latitud").val(dataJSON[i].position.lat),$("#longitud").val(dataJSON[i].position.lng),$("#valor").val(dataJSON[i].valorPlatoMax),$("#reputacion").val(dataJSON[i].reputacion),$("#link").val(dataJSON[i].link),$("#descripcion").val(dataJSON[i].descripcion))})});